<!DOCTYPE html>
<html lang="ta">
<head>
  <meta charset="UTF-8">
  <title>ро╡ро┐роорпНро╖рпЛродрпНродро░ро┐ родроЪро╛ (4 ро░ро╛роЪро┐роХро│рпН + роОродро┐ро░рпН 4)</title>
  <style>
    body {
      font-family: 'Noto Sans Tamil', sans-serif;
      background: #f0f4f8;
      color: #333;
      padding: 20px;
    }

    h2, h3 {
      text-align: center;
      color: #6a1b9a;
    }

    label {
      display: block;
      margin: 10px 0 5px;
      font-weight: bold;
    }

    select, input[type="date"] {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 1rem;
    }

    button {
      background: #8e24aa;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      display: block;
      margin: 0 auto 30px;
      transition: background 0.3s ease;
    }

    button:hover {
      background: #6a1b9a;
    }

    .table-wrapper {
      overflow-x: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
      min-width: 900px;
    }

    th, td {
      border: 1px solid #999;
      padding: 10px;
      text-align: center;
    }

    th {
      background-color: #f3e5f5;
      color: #4a148c;
      position: sticky;
      top: 0;
      z-index: 1;
    }

    tr:nth-child(even) td {
      background-color: #fafafa;
    }

    .highlight {
      background-color: #d0f0c0 !important;
      font-weight: bold;
      border-left: 5px solid #4caf50;
    }

    @media (max-width: 768px) {
      select, input[type="date"], button {
        width: 100%;
      }

      th, td {
        font-size: 0.85rem;
        padding: 6px;
      }
    }
  </style>
</head>
<body>

  <h2>ЁЯМЯ ро╡ро┐роорпНро╖рпЛродрпНродро░ро┐ родроЪро╛</h2>
  <h3>4 ро░ро╛роЪро┐ + роОродро┐ро░рпН 4 ро░ро╛роЪро┐ рокроХрпБродро┐</h3>

  <label>родрпКроЯроХрпНроХ ро▓роХрпНроХро┐ройроорпН:</label>
  <select id="lagnaSelect">
    <option>роорпЗро╖роорпН</option><option>ро░ро┐ро╖рокроорпН</option><option>рооро┐родрпБройроорпН</option>
    <option>роХроЯроХроорпН</option><option>роЪро┐роорпНроороорпН</option><option>роХройрпНройро┐</option>
    <option>родрпБро▓ро╛роорпН</option><option>ро╡ро┐ро░рпБроЪрпНроЪро┐роХроорпН</option><option>родройрпБроЪрпБ</option>
    <option>роороХро░роорпН</option><option>роХрпБроорпНрокроорпН</option><option>роорпАройроорпН</option>
  </select>

  <label>ро╡рпАроЯрпБроХро│рпН (1-7, 2-8, 3-9, 4-10):</label>
  <select id="pairSelect">
    <option value="0">1 - 7</option>
    <option value="1">2 - 8</option>
    <option value="2">3 - 9</option>
    <option value="3">4 - 10</option>
  </select>

  <label>ЁЯУЕ рокро┐ро▒роирпНрод родрпЗродро┐:</label>
  <input type="date" id="dobInput">

  <button onclick="generate()">ЁЯФН роХрогроХрпНроХро┐роЯрпБ</button>
  <div id="result"></div>

  <script>
    const rasiList = ["роорпЗро╖роорпН", "ро░ро┐ро╖рокроорпН", "рооро┐родрпБройроорпН", "роХроЯроХроорпН", "роЪро┐роорпНроороорпН", "роХройрпНройро┐", "родрпБро▓ро╛роорпН", "ро╡ро┐ро░рпБроЪрпНроЪро┐роХроорпН", "родройрпБроЪрпБ", "роороХро░роорпН", "роХрпБроорпНрокроорпН", "роорпАройроорпН"];
    const tamilMonths = ["роЬройро╡ро░ро┐", "рокро┐рокрпНро░ро╡ро░ро┐", "рооро╛ро░рпНроЪрпН", "роПрокрпНро░ро▓рпН", "роорпЗ", "роЬрпВройрпН", "роЬрпВро▓рпИ", "роЖроХро╕рпНроЯрпН", "роЪрпЖрокрпНроЯроорпНрокро░рпН", "роЕроХрпНроЯрпЛрокро░рпН", "роиро╡роорпНрокро░рпН", "роЯро┐роЪроорпНрокро░рпН"];

    const dashaMapping = {
      "роЕро╕рпНро╡ро┐ройро┐": { planet: "роХрпЗродрпБ", years: 7 }, "рокро░рогро┐": { planet: "роЪрпБроХрпНроХро┐ро░ройрпН", years: 20 }, "роХро╛ро░рпНродрпНродро┐роХрпИ": { planet: "роЪрпВро░ро┐ропройрпН", years: 6 },
      "ро░рпЛро╣ро┐рогро┐": { planet: "роЪроирпНродро┐ро░ройрпН", years: 10 }, "рооро┐ро░рпБроХроЪрпАро░ро┐роЯроорпН": { planet: "роЪрпЖро╡рпНро╡ро╛ропрпН", years: 7 }, "родро┐ро░рпБро╡ро╛родро┐ро░рпИ": { planet: "ро░ро╛роХрпБ", years: 18 },
      "рокрпБройро░рпНрокрпВроЪроорпН": { planet: "роХрпБро░рпБ", years: 16 }, "рокрпВроЪроорпН": { planet: "роЪройро┐", years: 19 }, "роЖропро┐ро▓рпНропроорпН": { planet: "рокрпБродройрпН", years: 17 },
      "роороХроорпН": { planet: "роХрпЗродрпБ", years: 7 }, "рокрпВро░роорпН": { planet: "роЪрпБроХрпНроХро┐ро░ройрпН", years: 20 }, "роЙродрпНродро┐ро░роорпН": { planet: "роЪрпВро░ро┐ропройрпН", years: 6 },
      "ро╣ро╕рпНродроорпН": { planet: "роЪроирпНродро┐ро░ройрпН", years: 10 }, "роЪро┐родрпНродро┐ро░рпИ": { planet: "роЪрпЖро╡рпНро╡ро╛ропрпН", years: 7 }, "роЪрпБро╡ро╛родро┐": { planet: "ро░ро╛роХрпБ", years: 18 },
      "ро╡ро┐роЪро╛роХроорпН": { planet: "роХрпБро░рпБ", years: 16 }, "роЕройрпБро╖роорпН": { planet: "роЪройро┐", years: 19 }, "роХрпЗроЯрпНроЯрпИ": { planet: "рокрпБродройрпН", years: 17 },
      "роорпВро▓роорпН": { planet: "роХрпЗродрпБ", years: 7 }, "рокрпВро░ро╛роЯроорпН": { planet: "роЪрпБроХрпНроХро┐ро░ройрпН", years: 20 }, "роЙродрпНродро┐ро░ро╛роЯроорпН": { planet: "роЪрпВро░ро┐ропройрпН", years: 6 },
      "родро┐ро░рпБро╡рпЛрогроорпН": { planet: "роЪроирпНродро┐ро░ройрпН", years: 10 }, "роЕро╡ро┐роЯрпНроЯроорпН": { planet: "роЪрпЖро╡рпНро╡ро╛ропрпН", years: 7 }, "роЪродропроорпН": { planet: "ро░ро╛роХрпБ", years: 18 },
      "рокрпВро░роЯрпНроЯро╛родро┐": { planet: "роХрпБро░рпБ", years: 16 }, "роЙродрпНродро┐ро░роЯрпНроЯро╛родро┐": { planet: "роЪройро┐", years: 19 }, "ро░рпЗро╡родро┐": { planet: "рокрпБродройрпН", years: 17 }
    };

    const rasiToPadas = {
      "роорпЗро╖роорпН": [ { nak: "роЕро╕рпНро╡ро┐ройро┐", padas: [1,2,3,4] }, { nak: "рокро░рогро┐", padas: [1,2,3,4] }, { nak: "роХро╛ро░рпНродрпНродро┐роХрпИ", padas: [1] } ],
      "ро░ро┐ро╖рокроорпН": [ { nak: "роХро╛ро░рпНродрпНродро┐роХрпИ", padas: [2,3,4] }, { nak: "ро░рпЛро╣ро┐рогро┐", padas: [1,2,3,4] }, { nak: "рооро┐ро░рпБроХроЪрпАро░ро┐роЯроорпН", padas: [1,2] } ],
      "рооро┐родрпБройроорпН": [ { nak: "рооро┐ро░рпБроХроЪрпАро░ро┐роЯроорпН", padas: [3,4] }, { nak: "родро┐ро░рпБро╡ро╛родро┐ро░рпИ", padas: [1,2,3,4] }, { nak: "рокрпБройро░рпНрокрпВроЪроорпН", padas: [1,2,3] } ],
      "роХроЯроХроорпН": [ { nak: "рокрпБройро░рпНрокрпВроЪроорпН", padas: [4] }, { nak: "рокрпВроЪроорпН", padas: [1,2,3,4] }, { nak: "роЖропро┐ро▓рпНропроорпН", padas: [1,2,3,4] } ],
      "роЪро┐роорпНроороорпН": [ { nak: "роороХроорпН", padas: [1,2,3,4] }, { nak: "рокрпВро░роорпН", padas: [1,2,3,4] }, { nak: "роЙродрпНродро┐ро░роорпН", padas: [1] } ],
      "роХройрпНройро┐": [ { nak: "роЙродрпНродро┐ро░роорпН", padas: [2,3,4] }, { nak: "ро╣ро╕рпНродроорпН", padas: [1,2,3,4] }, { nak: "роЪро┐родрпНродро┐ро░рпИ", padas: [1,2] } ],
      "родрпБро▓ро╛роорпН": [ { nak: "роЪро┐родрпНродро┐ро░рпИ", padas: [3,4] }, { nak: "роЪрпБро╡ро╛родро┐", padas: [1,2,3,4] }, { nak: "ро╡ро┐роЪро╛роХроорпН", padas: [1,2,3] } ],
      "ро╡ро┐ро░рпБроЪрпНроЪро┐роХроорпН": [ { nak: "ро╡ро┐роЪро╛роХроорпН", padas: [4] }, { nak: "роЕройрпБро╖роорпН", padas: [1,2,3,4] }, { nak: "роХрпЗроЯрпНроЯрпИ", padas: [1,2,3,4] } ],
      "родройрпБроЪрпБ": [ { nak: "роорпВро▓роорпН", padas: [1,2,3,4] }, { nak: "рокрпВро░ро╛роЯроорпН", padas: [1,2,3,4] }, { nak: "роЙродрпНродро┐ро░ро╛роЯроорпН", padas: [1] } ],
      "роороХро░роорпН": [ { nak: "роЙродрпНродро┐ро░ро╛роЯроорпН", padas: [2,3,4] }, { nak: "родро┐ро░рпБро╡рпЛрогроорпН", padas: [1,2,3,4] }, { nak: "роЕро╡ро┐роЯрпНроЯроорпН", padas: [1,2] } ],
      "роХрпБроорпНрокроорпН": [ { nak: "роЕро╡ро┐роЯрпНроЯроорпН", padas: [3,4] }, { nak: "роЪродропроорпН", padas: [1,2,3,4] }, { nak: "рокрпВро░роЯрпНроЯро╛родро┐", padas: [1,2,3] } ],
      "роорпАройроорпН": [ { nak: "рокрпВро░роЯрпНроЯро╛родро┐", padas: [4] }, { nak: "роЙродрпНродро┐ро░роЯрпНроЯро╛родро┐", padas: [1,2,3,4] }, { nak: "ро░рпЗро╡родро┐", padas: [1,2,3,4] } ]
    };

    function formatDateTamil(date) {
      const d = new Date(date);
      const day = d.getDate().toString().padStart(2, '0');
      const month = tamilMonths[d.getMonth()];
      const year = d.getFullYear();
      return `${day} ${month} ${year}`;
    }

    function getPadas(rasis, dob) {
      const result = [];
      let current = new Date(dob);
      for (const rasi of rasis) {
        const stars = rasiToPadas[rasi] || [];
        for (const s of stars) {
          const dash = dashaMapping[s.nak];
          const days = (dash.years * 365.25) / 4;
          for (const p of s.padas) {
            const from = new Date(current);
            const to = new Date(current.getTime() + days * 86400000);
            result.push({
              rasi, nak: s.nak, pada: p, graha: dash.planet,
              from: formatDateTamil(from),
              to: formatDateTamil(to),
              fromDate: from,
              toDate: to
            });
            current = to;
          }
        }
      }
      return result;
    }

    function generate() {
      const lagna = document.getElementById("lagnaSelect").value;
      const lagnaIndex = rasiList.indexOf(lagna);
      const offset = parseInt(document.getElementById("pairSelect").value);
      const dob = new Date(document.getElementById("dobInput").value);
      const today = new Date();

      let mainRasi = [], oppRasi = [];
      for (let i = 0; i < 4; i++) {
        mainRasi.push(rasiList[(lagnaIndex + offset + i) % 12]);
        oppRasi.push(rasiList[(lagnaIndex + offset + i + 6) % 12]);
      }

      const leftList = getPadas(mainRasi, dob);
      const rightList = getPadas(oppRasi, dob);

      let html = `<h3>${mainRasi.join(", ")} тЖФ ${oppRasi.join(", ")}</h3>`;
      html += `<div class="table-wrapper"><table><thead>
      <tr><th colspan="5">ро░ро╛роЪро┐</th><th colspan="5">роОродро┐ро░рпН ро░ро╛роЪро┐</th></tr>
      <tr><th>ро░ро╛роЪро┐</th><th>роироЯрпНроЪродрпНродро┐ро░роорпН</th><th>рокро╛родроорпН</th><th>роХро┐ро░роХроорпН</th><th>роХро╛ро▓роорпН</th>
          <th>ро░ро╛роЪро┐</th><th>роироЯрпНроЪродрпНродро┐ро░роорпН</th><th>рокро╛родроорпН</th><th>роХро┐ро░роХроорпН</th><th>роХро╛ро▓роорпН</th></tr></thead><tbody>`;

      const max = Math.max(leftList.length, rightList.length);
      for (let i = 0; i < max; i++) {
        const L = leftList[i] || {}, R = rightList[i] || {};
        const lh = today >= L.fromDate && today <= L.toDate ? "highlight" : "";
        const rh = today >= R.fromDate && today <= R.toDate ? "highlight" : "";

        html += `<tr>
          <td class="${lh}">${L.rasi || ""}</td><td class="${lh}">${L.nak || ""}</td><td class="${lh}">${L.pada || ""}</td><td class="${lh}">${L.graha || ""}</td><td class="${lh}">${L.from || ""}<br>${L.to || ""}</td>
          <td class="${rh}">${R.rasi || ""}</td><td class="${rh}">${R.nak || ""}</td><td class="${rh}">${R.pada || ""}</td><td class="${rh}">${R.graha || ""}</td><td class="${rh}">${R.from || ""}<br>${R.to || ""}</td>
        </tr>`;
      }

      html += "</tbody></table></div>";
      document.getElementById("result").innerHTML = html;
    }
  </script>

</body>
</html>
